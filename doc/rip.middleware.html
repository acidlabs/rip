<!DOCTYPE html>
<html><head><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>rip.middleware documentation</title></head><body><div id="header"><h1><a href="index.html">Rip 0.0.6 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><span>Namespaces</span></h3><ul><li><a href="rip.RipException.html"><span>rip.RipException</span></a></li><li><a href="rip.actions.html"><span>rip.actions</span></a></li><li><a href="rip.core.html"><span>rip.core</span></a></li><li><a href="rip.db.html"><span>rip.db</span></a></li><li class="current"><a href="rip.middleware.html"><span>rip.middleware</span></a></li><li><a href="rip.validation.html"><span>rip.validation</span></a></li></ul></div><div class="sidebar" id="vars"><h3>Public Vars</h3><ul><li><a href="rip.middleware.html#var-*responses*"><span>*responses*</span></a></li><li><a href="rip.middleware.html#var-*xml-tags*"><span>*xml-tags*</span></a></li><li><a href="rip.middleware.html#var-wrap-accept-header"><span>wrap-accept-header</span></a></li><li><a href="rip.middleware.html#var-wrap-allow"><span>wrap-allow</span></a></li><li><a href="rip.middleware.html#var-wrap-auth-header"><span>wrap-auth-header</span></a></li><li><a href="rip.middleware.html#var-wrap-body-parser"><span>wrap-body-parser</span></a></li><li><a href="rip.middleware.html#var-wrap-etag"><span>wrap-etag</span></a></li><li><a href="rip.middleware.html#var-wrap-request-entity-length"><span>wrap-request-entity-length</span></a></li><li><a href="rip.middleware.html#var-wrap-server-error"><span>wrap-server-error</span></a></li><li><a href="rip.middleware.html#var-wrap-supported-content-type"><span>wrap-supported-content-type</span></a></li><li><a href="rip.middleware.html#var-xml-%3Ehash-map"><span>xml-&gt;hash-map</span></a></li></ul></div><div class="namespace-docs" id="content"><h2>rip.middleware documentation</h2><pre class="doc">Wrappers to be used for rip actions or ring middleware.
Some wrappers recives an optional response to be merged with the default error response.</pre><div class="public" id="var-*responses*"><h3>*responses*</h3><div class="usage"></div><pre class="doc">Default error responses
</pre></div><div class="public" id="var-*xml-tags*"><h3>*xml-tags*</h3><div class="usage"></div><pre class="doc">Default xml serialization tags
</pre></div><div class="public" id="var-wrap-accept-header"><h3>wrap-accept-header</h3><div class="usage"><code>(wrap-accept-header handler content-types default-type)</code></div><pre class="doc">Checks the Accept header and validates based on the given supported content types.
If the the content type is supported then the best type from the content negotiation is
stored as :header-content-type in the :context map of the request.</pre></div><div class="public" id="var-wrap-allow"><h3>wrap-allow</h3><div class="usage"><code>(wrap-allow handler allow-fn &amp; [response])</code></div><pre class="doc">Used to check for permissions on resources.
</pre></div><div class="public" id="var-wrap-auth-header"><h3>wrap-auth-header</h3><div class="usage"><code>(wrap-auth-header handler &amp; [response])</code></div><pre class="doc">Cecks the Authorization header.
</pre></div><div class="public" id="var-wrap-body-parser"><h3>wrap-body-parser</h3><div class="usage"><code>(wrap-body-parser handler xml-tags)</code></div><pre class="doc">Wrap the body to a clojure map, only for json and xml inputs.
The result map is stored as :input in the :context map of the request.</pre></div><div class="public" id="var-wrap-etag"><h3>wrap-etag</h3><div class="usage"><code>(wrap-etag handler get-etag)</code></div><pre class="doc">Compares the etag from the result of calling the given function.
</pre></div><div class="public" id="var-wrap-request-entity-length"><h3>wrap-request-entity-length</h3><div class="usage"><code>(wrap-request-entity-length handler body-max-length &amp; [response])</code></div><pre class="doc">Validates the length of the request body.
</pre></div><div class="public" id="var-wrap-server-error"><h3>wrap-server-error</h3><div class="usage"><code>(wrap-server-error handler error-function)</code></div><pre class="doc">Wrap a handler such that exceptions are handled with the given error-function.
</pre></div><div class="public" id="var-wrap-supported-content-type"><h3>wrap-supported-content-type</h3><div class="usage"><code>(wrap-supported-content-type handler content-types &amp; [response])</code></div><pre class="doc">Validates the content type from the request.
</pre></div><div class="public" id="var-xml-%3Ehash-map"><h3>xml-&gt;hash-map</h3><div class="usage"><code>(xml-&gt;hash-map {:keys [tag content]})</code></div><pre class="doc">Transforms clojure.data.xml.Element to clojure maps.
To keep an analog form to json transformations, a 'list' tag must be specified
(default to :list in *xml-tags* global varible).</pre></div></div></body></html>